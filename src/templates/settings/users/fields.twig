{% requireAdmin false %}

{% extends "settings/users/_layout" %}
{% set selectedNavItem = 'fields' %}
{% import "_includes/forms" as forms %}
{% if readOnly is not defined %}
    {% set readOnly = not craft.app.config.general.allowAdminChanges %}
{% endif %}

{% if readOnly %}
    {% set contentNotice = craft.cp.allowAdminChangesReadOnlyNotice() %}
{% endif %}

{% block content %}
    <form method="post" accept-charset="UTF-8" data-saveshortcut data-confirm-unload>
        {{ actionInput('users/save-field-layout') }}
        {{ csrfInput() }}

        {{ forms.fieldLayoutDesignerField({
            first: true,
            fieldLayout: fieldLayout ?? craft.app.fields.getLayoutByType('craft\\elements\\User'),
            withCardViewDesigner: true,
            disabled: readOnly,
        }) }}

        {% if not readOnly %}
            <div class="buttons">
                <button type="submit" class="btn submit">{{ 'Save'|t('app') }}</button>
            </div>
        {% endif %}
    </form>
{% endblock %}
